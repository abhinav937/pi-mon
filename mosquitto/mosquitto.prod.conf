# Mosquitto Production Configuration for Pi Monitor
# Secure settings for production deployment

# Basic listeners with security
listener 1883
listener 9001
protocol websockets

# Disable anonymous access in production
allow_anonymous false

# Require authentication
password_file /mosquitto/config/passwd

# Persistence settings with security
persistence true
persistence_location /mosquitto/data/
autosave_interval 1800
autosave_on_changes false

# Production logging - essential messages only
log_dest file /mosquitto/log/mosquitto.log
log_type error
log_type warning
log_type notice
log_timestamp true
connection_messages false

# Security restrictions
max_connections 100
max_inflight_messages 10
max_queued_messages 50

# Production client settings
keepalive_interval 30
retry_interval 10
sys_interval 300

# Memory and performance optimizations
memory_limit 67108864
message_size_limit 1048576
max_packet_size 1048576

# Retain message settings
retain_available true
max_retained_messages 1000

# Security settings
upgrade_outgoing_qos false
max_topic_alias 10

# Disable unused features for security
allow_zero_length_clientid false
